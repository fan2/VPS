################################################################################
# yum install m2crypto
################################################################################
[root@vcentos ~]# yum install m2crypto
Failed to set locale, defaulting to C
Loaded plugins: fastestmirror
base                                                                     | 3.6 kB  00:00:00     
epel/x86_64/metalink                                                     |  15 kB  00:00:00     
epel                                                                     | 4.7 kB  00:00:00     
extras                                                                   | 3.4 kB  00:00:00     
updates                                                                  | 3.4 kB  00:00:00     
(1/2): epel/x86_64/primary_db                                            | 6.1 MB  00:00:00     
(2/2): epel/x86_64/updateinfo                                            | 862 kB  00:00:00     
Loading mirror speeds from cached hostfile
 * base: mirrors.xmission.com
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirrors.xmission.com
 * updates: mirrors.xmission.com
Resolving Dependencies
--> Running transaction check
---> Package m2crypto.x86_64 0:0.21.1-17.el7 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================================
 Package               Arch                Version                      Repository         Size
================================================================================================
Installing:
 m2crypto              x86_64              0.21.1-17.el7                base              429 k

Transaction Summary
================================================================================================
Install  1 Package

Total download size: 429 k
Installed size: 1.9 M
Is this ok [y/d/N]: y
Downloading packages:
m2crypto-0.21.1-17.el7.x86_64.rpm                                        | 429 kB  00:00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : m2crypto-0.21.1-17.el7.x86_64                                                1/1 
  Verifying  : m2crypto-0.21.1-17.el7.x86_64                                                1/1 

Installed:
  m2crypto.x86_64 0:0.21.1-17.el7                                                               

Complete!


如果后面启动提示 `ssserver :command not found!`，则有可能是没有安装 m2crypto 的缘故。

################################################################################
# pip3 install shadowsocks
################################################################################
[root@vcentos ~]# pip3 search shadowsocks
auto-ss (0.1.3)                - Auto acquire ss-link free shadowsocks accounts and test
                                 connection speed
shadowsocks-c (2.8.2)          - shadowsocks clone with linux pluggable congestion control
                                 support
shadowsocks-gilgamesh (0.2.5)  - a simple way to use mongo db, let db like dict
shadowsocks-gtk (0.1.1)        - ShadowSocks Gtk Client
shadowsocks-py (2.9.1)         - A fast tunnel proxy that help you get through firewalls, the
                                 original pypi source is not maintained since version 2.8.2,
                                 this is a newly maintained pypi source by SilverLining.
shadowsocks-sdk (0.1.0.dev0)   - shadowsocks sdk and cli
shadowdns (0.1.3)              - A DNS forwarder using Shadowsocks as the server
shadowproxy (0.2.3)            - A proxy server that implements
                                 Socks5/Shadowsocks/Redirect/HTTP (tcp) and
                                 Shadowsocks/TProxy/Tunnel (udp) protocols.
shadowsocks (2.8.2)            - A fast tunnel proxy that help you get through firewalls
sscrypto (0.1.1)               - shadowsocks crypto libs.

[root@vcentos ~]# pip3 show shadowsocks

[root@vcentos ~]# pip3 install shadowsocks
Collecting shadowsocks
  Downloading shadowsocks-2.8.2.tar.gz
Building wheels for collected packages: shadowsocks
  Running setup.py bdist_wheel for shadowsocks ... done
  Stored in directory: /root/.cache/pip/wheels/c9/d8/ff/5425932823af361970658e9421b4d53ac50b08dcbe6fd41e5f
Successfully built shadowsocks
Installing collected packages: shadowsocks
Successfully installed shadowsocks-2.8.2


// 运行出错，可能是python3语法兼容问题，下面卸载重新使用 pip(2) 安装。
[root@vcentos ~]# ssserver -c /etc/shadowsocks.json -d start
INFO: loading config from /etc/shadowsocks.json
Traceback (most recent call last):
  File "/usr/lib/python3.4/site-packages/shadowsocks/shell.py", line 151, in get_config
    config = parse_json_in_str(f.read().decode('utf8'))
  File "/usr/lib/python3.4/site-packages/shadowsocks/shell.py", line 365, in parse_json_in_str
    return json.loads(data, object_hook=_decode_dict)
  File "/usr/lib64/python3.4/json/__init__.py", line 331, in loads
    return cls(**kw).decode(s)
  File "/usr/lib64/python3.4/json/decoder.py", line 343, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib64/python3.4/json/decoder.py", line 359, in raw_decode
    obj, end = self.scan_once(s, idx)
ValueError: Expecting property name enclosed in double quotes: line 2 column 31 (char 32)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/bin/ssserver", line 11, in <module>
    sys.exit(main())
  File "/usr/lib/python3.4/site-packages/shadowsocks/server.py", line 34, in main
    config = shell.get_config(False)
  File "/usr/lib/python3.4/site-packages/shadowsocks/shell.py", line 154, in get_config
    e.message)
AttributeError: 'ValueError' object has no attribute 'message'

################################################################################
# pip3 uninstall shadowsocks
################################################################################
[root@vcentos ~]# pip3 uninstall shadowsocks
Uninstalling shadowsocks-2.8.2:
  /usr/lib/python3.4/site-packages/shadowsocks-2.8.2.dist-info/DESCRIPTION.rst
  /usr/lib/python3.4/site-packages/shadowsocks-2.8.2.dist-info/INSTALLER
  /usr/lib/python3.4/site-packages/shadowsocks-2.8.2.dist-info/METADATA
  /usr/lib/python3.4/site-packages/shadowsocks-2.8.2.dist-info/RECORD
  /usr/lib/python3.4/site-packages/shadowsocks-2.8.2.dist-info/WHEEL
  /usr/lib/python3.4/site-packages/shadowsocks-2.8.2.dist-info/entry_points.txt
  /usr/lib/python3.4/site-packages/shadowsocks-2.8.2.dist-info/metadata.json
  /usr/lib/python3.4/site-packages/shadowsocks-2.8.2.dist-info/top_level.txt
  /usr/lib/python3.4/site-packages/shadowsocks/__init__.py
  /usr/lib/python3.4/site-packages/shadowsocks/__init__.pyc
  /usr/lib/python3.4/site-packages/shadowsocks/asyncdns.py
  /usr/lib/python3.4/site-packages/shadowsocks/asyncdns.pyc
  /usr/lib/python3.4/site-packages/shadowsocks/common.py
  /usr/lib/python3.4/site-packages/shadowsocks/common.pyc
  /usr/lib/python3.4/site-packages/shadowsocks/crypto/__init__.py
  /usr/lib/python3.4/site-packages/shadowsocks/crypto/__init__.pyc
  /usr/lib/python3.4/site-packages/shadowsocks/crypto/openssl.py
  /usr/lib/python3.4/site-packages/shadowsocks/crypto/openssl.pyc
  /usr/lib/python3.4/site-packages/shadowsocks/crypto/rc4_md5.py
  /usr/lib/python3.4/site-packages/shadowsocks/crypto/rc4_md5.pyc
  /usr/lib/python3.4/site-packages/shadowsocks/crypto/sodium.py
  /usr/lib/python3.4/site-packages/shadowsocks/crypto/sodium.pyc
  /usr/lib/python3.4/site-packages/shadowsocks/crypto/table.py
  /usr/lib/python3.4/site-packages/shadowsocks/crypto/table.pyc
  /usr/lib/python3.4/site-packages/shadowsocks/crypto/util.py
  /usr/lib/python3.4/site-packages/shadowsocks/crypto/util.pyc
  /usr/lib/python3.4/site-packages/shadowsocks/daemon.py
  /usr/lib/python3.4/site-packages/shadowsocks/daemon.pyc
  /usr/lib/python3.4/site-packages/shadowsocks/encrypt.py
  /usr/lib/python3.4/site-packages/shadowsocks/encrypt.pyc
  /usr/lib/python3.4/site-packages/shadowsocks/eventloop.py
  /usr/lib/python3.4/site-packages/shadowsocks/eventloop.pyc
  /usr/lib/python3.4/site-packages/shadowsocks/local.py
  /usr/lib/python3.4/site-packages/shadowsocks/local.pyc
  /usr/lib/python3.4/site-packages/shadowsocks/lru_cache.py
  /usr/lib/python3.4/site-packages/shadowsocks/lru_cache.pyc
  /usr/lib/python3.4/site-packages/shadowsocks/manager.py
  /usr/lib/python3.4/site-packages/shadowsocks/manager.pyc
  /usr/lib/python3.4/site-packages/shadowsocks/server.py
  /usr/lib/python3.4/site-packages/shadowsocks/server.pyc
  /usr/lib/python3.4/site-packages/shadowsocks/shell.py
  /usr/lib/python3.4/site-packages/shadowsocks/shell.pyc
  /usr/lib/python3.4/site-packages/shadowsocks/tcprelay.py
  /usr/lib/python3.4/site-packages/shadowsocks/tcprelay.pyc
  /usr/lib/python3.4/site-packages/shadowsocks/udprelay.py
  /usr/lib/python3.4/site-packages/shadowsocks/udprelay.pyc
Proceed (y/n)? y
  Successfully uninstalled shadowsocks-2.8.2

################################################################################
# pip2 install shadowsocks
################################################################################
[root@vcentos ~]# pip2 install shadowsocks
Collecting shadowsocks
  Using cached shadowsocks-2.8.2.tar.gz
Building wheels for collected packages: shadowsocks
  Running setup.py bdist_wheel for shadowsocks ... done
  Stored in directory: /root/.cache/pip/wheels/c9/d8/ff/5425932823af361970658e9421b4d53ac50b08dcbe6fd41e5f
Successfully built shadowsocks
Installing collected packages: shadowsocks
Successfully installed shadowsocks-2.8.2

[root@vcentos ~]# pip2 list
DEPRECATION: The default format will switch to columns in the future. You can use --format=(legacy|columns) (or define a format=(legacy|columns) in your pip.conf under the [list] section) to disable this warning.
configobj (4.7.2)
decorator (3.4.0)
iniparse (0.4)
perf (0.1)
pip (9.0.1)
pycurl (7.19.0)
pygobject (3.14.0)
pygpgme (0.3)
pyliblzma (0.5.3)
pyudev (0.15)
pyxattr (0.5.1)
setuptools (38.2.5)
shadowsocks (2.8.2)
slip (0.4.0)
slip.dbus (0.4.0)
urlgrabber (3.10)
wheel (0.30.0)
yum-metadata-parser (1.1.4)



[root@vcentos ~]# ssserver --version
Shadowsocks 2.8.2

[root@vcentos ~]# whereis ssserver
ssserver: /usr/bin/ssserver

[root@vcentos ~]# which ssserver
/usr/bin/ssserver

################################################################################
# 开启防火墙端口 8388
################################################################################
[root@vcentos ~]# iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 8388 -j ACCEPT

[root@vcentos ~]# service iptables save
The service command supports only basic LSB actions (start, stop, restart, try-restart, reload, force-reload, status). For other actions, please try to use systemctl.

[root@vcentos ~]# service iptables restart
Redirecting to /bin/systemctl restart  iptables.service
Failed to restart iptables.service: Unit not found.

################################################################################
# ssserver start
################################################################################
[root@vcentos ~]# ssserver -c /etc/shadowsocks.json -d start
INFO: loading config from /etc/shadowsocks.json
2017-12-26 15:24:36 INFO     loading libcrypto from libcrypto.so.10
started

`telnet IP PORT` 失败，还是不行！！！  
CentOS 7默认使用的是 firewalld，而非 iptables，防火墙端口还是未正确开启。  
考虑去网站管理看看 firewall 配置策略。  
